//
// Copyright 2021, GeoSolutions Sas.
// All rights reserved.
//
// This source code is licensed under the BSD-style license found in the
// LICENSE file in the root directory of this source tree.
//

// **************
// Theme
// **************
#ms-components-theme(@theme-vars) {
    .featuregrid-geometry-filter.filter-enabled {
        .color-var(@theme-vars[primary]);
    }
    .ms-popover-overlay {
        .picker-container {
            .background-color-var(@theme-vars[main-bg]);
            &.date-time {
                .date-time-container {
                    .date-time-hour-input {
                        .background-color-var(@theme-vars[main-bg]);
                        .time-icon {
                            .border-color-var(@theme-vars[main-border-color]);
                        }
                    }
                }
            }
            .range-tab {
                .color-var(@theme-vars[main-color]);
                .background-color-var(@theme-vars[main-bg]);
                &.selected {
                    .background-color-var(@theme-vars[main-variant-bg]);
                }
            }
            .quick-time-selector {
                .border-top-color-var(@theme-vars[main-border-color])
            }
        }
    }
    .glyphicon-date-time {
        .color-var(@theme-vars[primary])
    }
}

// **************
// Layout
// **************
.feature-grid-drag-handle-show .drag-handle {
    display: inline;
}

.feature-grid-drag-handle-hide .drag-handle {
    display: none;
}
.empty-row .react-grid-Cell {
    opacity: 0.5;
}
.empty-row:hover .react-grid-Cell {
    opacity: 0.5;
}
.empty-row .react-grid-Cell__value .glyphicon-exclamation-mark {
    opacity: 0;
}
.featuregrid-geometry-filter {
    display: flex;
    flex-direction: column;
    justify-content: center;
    text-align: center;
    height: 100%;
    cursor: pointer;
}

.featuregrid-geometry-filter.filter-deactivated {
    opacity: 0.7;
    cursor: auto;
}

.feature-grid-wrapper {
    // Override dock style
    > div {
        position: unset !important;
        > div {
            position: absolute !important;
            z-index: 1060 !important;
        }
    }
}

// ****************
/*styles related to feature grid columns filters*/
// ****************
.feature-grid-drag-handle-show{
    div.form-group{
        display:flex;
        margin-top: -4px;
        div.rw-dropdownlist.rw-widget{
            min-width:fit-content;
        }
        div.rw-popup.rw-widget, div.rw-widget{
            width:100%;
        }
        div.rw-popup.rw-widget{
            height: 150px;
        }
        input.form-control.input-sm, div.rw-popup.rw-widget ul.rw-list{
            height:100%;
        }
        .rw-datetimepicker .dateTime-picker-hours ul.rw-list{
            max-height:unset;
        }
        div.rw-widget div.rw-input{
            padding-right: 0.5rem;
        }
        div.rw-widget .form-control{
            border: none;
        }
        .range-time-input div.rw-calendar-popup.rw-popup-container{
            left: -2.5rem;
            overflow-x:hidden;
            overflow-y:auto;
        }
        div.range-tab{
            &:hover{
                cursor:pointer;
            }
        }
        input.rw-input.has-error{
            outline: 2px auto var(--ms-danger, @ms-danger);
        }
        div.rw-datetimepicker.rw-widget.time-type, div.rw-datetimepicker.rw-widget.rw-has-both{
            div.rw-popup-container.rw-hours-popup{
                right: 0;
                left: 0;
                > div.rw-popup.rw-widget{
                    left:0;
                    right:0;
                }
            }
        }
        div.rw-datetimepicker.rw-widget:not(.rw-datetimepicker.range-time-input.rw-widget){
            div.rw-popup-container.rw-calendar-popup:not(.rw-hours-popup){
                right: -12px;
                left:auto;
            }
        }
    } 
}
/* minimize calendar row height in feature-grid that renders within popover */
.ms-popover-overlay{
    div.picker-container .rw-calendar.rw-widget tbody span.rw-btn{
        line-height: 2em;
    }
    .picker-container {
        .range-tab{
            &:hover{
                cursor:pointer;
            }
            width: 50%;
            cursor: pointer;
            font-size: 8px;
            height: 40px; 
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 0.5rem; 
        }
        position: relative;
        width: 300px;
        height: 290px; 
        &.query-date {
            height: 100%;
            max-height: 500px;
        }
        &.range {
            height: 328px;
            &.query-date {
                height: 100%;
                max-height: 500px;
            }
        }
        &.date-time, &.time {
            height: 100%;
        }
        &.date-time {
            .date-time-container {
                .rw-widget {
                    height: 290px;
                }
                .date-time-hour-input {
                    display: flex;
                    align-items: center;
                    padding: 2px;
                    .rw-input {
                        height: 30px;
                    }
                    .time-icon {
                        width: 30px;
                        height: 30px;
                        display: flex;
                        justify-content: center;
                        align-items: center;
                        border: 1px solid;
                        border-left-width: 1px;
                    }
                }
            }
        }
        .quick-time-selector {
            display: flex;
            gap: 4px;
            padding: 8px 4px;
            margin-top: 4px;
            flex-wrap: wrap;
            border-top: 1px solid;
        }
        overflow: auto;
        .rw-widget {
            border: none !important;
        }
    }
}
// **************
// FeatureEditorFallback Layout
// **************
#ms-components-theme(@theme-vars) {
    .feature-editor-fallback-container {
        .color-var(@theme-vars[main-color]);
        .background-color-var(@theme-vars[main-bg]);
        width: 100%;
        height: 100%;
        bottom: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        position: absolute;
    }
}
